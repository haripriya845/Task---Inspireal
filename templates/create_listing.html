<!DOCTYPE html>
<html>
<head>
    <title>Create Listing</title>
    <style>
        body { font-family: Arial; background:#eef0f3; padding:20px; }
        .box { max-width:550px; margin:30px auto; background:white; padding:25px;
            border-radius:10px; box-shadow:0 3px 7px rgba(0,0,0,0.15); }
        input, select, textarea { width:100%; padding:10px; margin:10px 0;
            border-radius:5px; border:1px solid #bbb; }
        button { width:100%; padding:12px; background:#28a745; color:white;
            border:none; border-radius:6px; cursor:pointer; }
        button:hover { background:#1f8a36; }
        .error { color:red; }
        .back { color:#007bff; text-decoration:none; }
    </style>
</head>
<body>

<div class="box">

    <a href="/supplier/listings/" class="back">‚Üê Back to Listings</a>
    <h2>Create New Listing</h2>

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    <form method="POST">
        {% csrf_token %}

        <input type="text" name="name" placeholder="Product Name" required>

        <select name="category">
            <option value="raw_material">Raw Material</option>
            <option value="service">Service</option>
            <option value="other">Other</option>
        </select>

        <textarea name="description" rows="4" placeholder="Description"></textarea>

        <input type="number" step="0.01" name="quantity_available" placeholder="Available Quantity" required>

        <input type="text" name="unit" placeholder="Unit (kg, ton, litre)" required>

        <input type="text" name="location_country" placeholder="Country" required>

        <select name="pricing_mode" id="pmode" onchange="togglePrice()">
            <option value="fixed">Fixed Price</option>
            <option value="rfq_only">RFQ Only</option>
        </select>

        <input type="number" step="0.01" name="unit_price" id="priceField" placeholder="Unit Price">

        <button type="submit">Create Listing</button>
    </form>

</div>

<script>
function togglePrice() {
    var mode = document.getElementById("pmode").value;
    var priceField = document.getElementById("priceField");
    priceField.style.display = mode === "fixed" ? "block" : "none";
}
togglePrice();
</script>

</body>
</html>
